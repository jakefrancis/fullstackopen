{"version":3,"sources":["services/persons.js","components/Message.js","components/Filter.js","components/Numbers.js","components/PersonForm.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Message","message","messageType","className","Filter","props","filterHandler","filterName","onChange","value","Numbers","person","removePerson","name","number","onClick","PersonForm","nameHandler","newName","numberHandler","newNumber","addPerson","type","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","filterState","setFilterState","setMessage","setMessageType","createNotification","content","setTimeout","useEffect","personService","allPersons","event","target","getAttribute","window","confirm","newEntry","filter","catch","error","filtered","toLowerCase","includes","preventDefault","newPerson","names","map","updatePersons","copy","console","log","concat","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d66bd888.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl,newObject)\n    return request.then(response => response.data)\n} \n\nconst alterNumber = (newObject, id) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response =>  response.data)\n}\n\nconst removeEntry = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default {getAll,create,alterNumber,removeEntry}","import React from 'react'\n\nconst Message = ({message, messageType}) => {\n    if(message === null){\n        return null\n    }\n    \n    return (\n        <div className={messageType}>\n            {message}\n        </div>\n    )\n\n}\n\nexport default Message","import React from 'react'\n\nconst Filter = (props) => {\n    const {filterHandler, filterName} =  props\n    return (\n    <div>\n          filter shown with<input onChange={filterHandler} value={filterName} />\n    </div>\n    )\n  }\n\n  export default Filter","import React from 'react'\n\nconst Numbers = (props) => {\n    const {person, removePerson} = props\n    return (\n    <div>\n        <span>{person.name}: {person.number}</span><span> </span>\n        <button name={person.name} id={person.id} onClick={removePerson}>delete</button>\n    </div>\n    )\n  }\n  \n  export default Numbers","import React from 'react'\n\n\nconst PersonForm = (props) => {\n  \n    const \n    { nameHandler,\n      newName,\n      numberHandler,\n      newNumber,\n      addPerson} = props\n  \n  \n  \n    return (\n      <form>\n          <div>\n            name: <input onChange={nameHandler} value={newName} />\n          </div>\n           <div>\n            number: <input onChange={numberHandler} value={newNumber} />\n          </div>\n          <div>\n            <button onClick={addPerson} type=\"submit\">add</button>\n          </div>\n        </form>\n      )\n    \n  }\n\n  \n  export default PersonForm","import React, { useState, useEffect } from \"react\";\nimport personService from './services/persons'\nimport Message from './components/Message'\n\nimport Filter from \"./components/Filter\";\nimport Numbers from \"./components/Numbers\";\nimport PersonForm from \"./components/PersonForm\";\n\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterName, setFilter] = useState(\"\");\n  const [filterState, setFilterState] = useState(false);\n  const [message, setMessage] = useState(null)\n  const [messageType, setMessageType] = useState(null)\n\n\n  const createNotification =(content,type) => {\n    setMessage(content)\n    setMessageType(type)\n    setTimeout( () => {\n      setMessage(null)\n      setMessageType(null)\n    }, 5000)\n  };\n\n\n  const dbHook = () => {\n    personService\n      .getAll()\n      .then(allPersons => {\n        setPersons(allPersons)\n      }\n      )\n  }\n\n  useEffect(dbHook,[])\n  const removePerson = (event) => {\n    const target = event.target\n    const id = target.getAttribute(\"id\")\n    const name = target.getAttribute('name')\n    const result = window.confirm(`Delete ${name}?`)\n    if(result) {\n      personService\n        .removeEntry(id)\n        .then(newEntry => {\n          setPersons(persons.filter(person => person.id !== id))\n          createNotification(`Successfully deleted ${name} from server`, 'notification')\n        })\n        .catch( error => {\n          createNotification(`Information for ${name} has already been removed from the server`, 'error')\n\n        })\n    }\n\n  \n\n}\n\n\n  const nameHandler = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const numberHandler = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const filterHandler = (event) => {\n    setFilter(event.target.value);\n    if (event.target.value !== \"\") setFilterState(true);\n    else setFilterState(false);\n  };\n\n  const filtered = filterState\n    ? persons.filter((person) =>\n        person.name.toLowerCase().includes(filterName.toLowerCase())\n      )\n    : persons;\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n\n    const names = persons.map((person) => person.name)\n    const ids = persons.map((person => person.id))\n    if (!names.includes(newPerson.name)) {\n      console.log('here')\n      personService\n      .create(newPerson)\n      .then(newEntry => {\n      setPersons(persons.concat(newEntry));\n      setNewName(\"\");\n      setNewNumber(\"\");\n      createNotification(`Added ${newPerson.name}`, 'notification')\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        createNotification(`Error: ${error.response.data.error}`, 'error')\n      })\n      \n    } else {\n       let confirmation = window.confirm(`${newPerson.name} has already been added to the phonebook, replace the old number with the new one?`);\n        if (confirmation){\n         let id;\n         let updatePersons = persons.map(person => {\n            let copy = {...person}\n            if(copy.name === newName){\n              copy.number = newNumber\n              id = copy.id\n          }\n          return copy\n        })\n          console.log(updatePersons)\n          personService\n          .alterNumber(newPerson, id)\n          .then((response) => { /*\n            console.log('here')\n            setPersons(updatePersons);\n            setNewName(\"\");\n            setNewNumber(\"\")\n            createNotification(`Updated the number for ${newPerson.name}`, 'notification')*/\n          })\n          .catch(error => {\n            console.log(error.response.data)\n            createNotification(`Error: ${error.response.data.error}`, 'error')\n          })\n        }    \n    }\n\n\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Message message={message} messageType={messageType}/>\n      <Filter filterHandler={filterHandler} filterName={filterName} />\n      <h2>add new number</h2>\n      <PersonForm\n        nameHandler={nameHandler}\n        newName={newName}\n        numberHandler={numberHandler}\n        newNumber={newNumber}\n        addPerson={addPerson}\n      />\n      <h2>Numbers</h2>\n      {filtered.map((person) => (\n        <Numbers \n          key={person.name}\n          person ={person} \n          removePerson={removePerson}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport './index.css'\n\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}